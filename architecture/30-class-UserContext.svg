<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="474px" preserveAspectRatio="none" style="width:1432px;height:474px;background:#F0F0F0;" version="1.1" viewBox="0 0 1432 474" width="1432px" zoomAndPan="magnify"><title>30-class-UserContext / static structure</title><defs/><g><rect fill="#F0F0F0" height="474" style="stroke:none;stroke-width:1;" width="1432" x="0" y="0"/><g class="title" data-source-line="2"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="267.7629" x="575.5547" y="24.9659">30-class-UserContext / static structure</text></g><!--cluster app--><g class="cluster" data-entity="app" data-source-line="7" data-uid="ent0004" id="cluster_app"><path d="M8.5,46.6699 L35.6799,46.6699 A3.75,3.75 0 0 1 38.1799,49.1699 L45.1799,71.7378 L696.5,71.7378 A2.5,2.5 0 0 1 699,74.2378 L699,465.1699 A2.5,2.5 0 0 1 696.5,467.6699 L8.5,467.6699 A2.5,2.5 0 0 1 6,465.1699 L6,49.1699 A2.5,2.5 0 0 1 8.5,46.6699" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="45.1799" y1="71.7378" y2="71.7378"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="26.1799" x="10" y="63.6358">app</text></g><!--cluster core--><g class="cluster" data-entity="core" data-source-line="5" data-uid="ent0002" id="cluster_core"><path d="M32.5,92.6699 L63.9919,92.6699 A3.75,3.75 0 0 1 66.4919,95.1699 L73.4919,117.7378 L672.5,117.7378 A2.5,2.5 0 0 1 675,120.2378 L675,441.1699 A2.5,2.5 0 0 1 672.5,443.6699 L32.5,443.6699 A2.5,2.5 0 0 1 30,441.1699 L30,95.1699 A2.5,2.5 0 0 1 32.5,92.6699" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="73.4919" y1="117.7378" y2="117.7378"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="30.4919" x="34" y="109.6358">core</text></g><!--class AuthUser--><g class="entity" data-entity="AuthUser" data-source-line="7" data-uid="ent0003" id="entity_AuthUser"><rect fill="#F1F1F1" height="137.6837" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195.1894" x="451.5" y="289.6699"/><ellipse cx="513.8838" cy="312.3759" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M516.8525,318.0165 Q516.2744,318.3134 515.6338,318.454 Q514.9932,318.6103 514.29,318.6103 Q511.79,318.6103 510.4619,316.9697 Q509.1494,315.3134 509.1494,312.1884 Q509.1494,309.0634 510.4619,307.4072 Q511.79,305.7509 514.29,305.7509 Q514.9932,305.7509 515.6338,305.9072 Q516.29,306.0634 516.8525,306.3603 L516.8525,309.079 Q516.2275,308.5009 515.6338,308.2353 Q515.04,307.954 514.415,307.954 Q513.0713,307.954 512.3838,309.0322 Q511.6963,310.0947 511.6963,312.1884 Q511.6963,314.2822 512.3838,315.3603 Q513.0713,316.4228 514.415,316.4228 Q515.04,316.4228 515.6338,316.1572 Q516.2275,315.8759 516.8525,315.2978 L516.8525,318.0165 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="36.1443" x="547.2726" y="307.498">&#171;auth&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.9218" x="534.3838" y="325.9799">AuthUser</text><line style="stroke:#181818;stroke-width:0.5;" x1="452.5" x2="645.6894" y1="335.0819" y2="335.0819"/><ellipse cx="462.5" cy="350.1159" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.9319" x="471.5" y="354.0479">id: int</text><ellipse cx="462.5" cy="369.1838" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152.3194" x="471.5" y="373.1158">tenant_id: Optional[int]</text><ellipse cx="462.5" cy="388.2517" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.8135" x="471.5" y="392.1837">roles: Tuple[str, ...]</text><ellipse cx="462.5" cy="407.3196" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169.1894" x="471.5" y="411.2516">permissions: Tuple[str, ...]</text><line style="stroke:#181818;stroke-width:0.5;" x1="452.5" x2="645.6894" y1="419.3536" y2="419.3536"/></g><!--class UserContext--><g class="entity" data-entity="UserContext" data-source-line="14" data-uid="ent0005" id="entity_UserContext"><rect fill="#F1F1F1" height="137.6837" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195.1894" x="177.5" y="289.6699"/><ellipse cx="229.8458" cy="312.3759" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M232.8146,318.0165 Q232.2365,318.3134 231.5958,318.454 Q230.9552,318.6103 230.2521,318.6103 Q227.7521,318.6103 226.424,316.9697 Q225.1115,315.3134 225.1115,312.1884 Q225.1115,309.0634 226.424,307.4072 Q227.7521,305.7509 230.2521,305.7509 Q230.9552,305.7509 231.5958,305.9072 Q232.2521,306.0634 232.8146,306.3603 L232.8146,309.079 Q232.1896,308.5009 231.5958,308.2353 Q231.0021,307.954 230.3771,307.954 Q229.0333,307.954 228.3458,309.0322 Q227.6583,310.0947 227.6583,312.1884 Q227.6583,314.2822 228.3458,315.3603 Q229.0333,316.4228 230.3771,316.4228 Q231.0021,316.4228 231.5958,316.1572 Q232.1896,315.8759 232.8146,315.2978 L232.8146,318.0165 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50.3403" x="266.1745" y="307.498">&#171;context&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.9977" x="250.3458" y="325.9799">UserContext</text><line style="stroke:#181818;stroke-width:0.5;" x1="178.5" x2="371.6894" y1="335.0819" y2="335.0819"/><ellipse cx="188.5" cy="350.1159" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.1837" x="197.5" y="354.0479">user_id: int</text><ellipse cx="188.5" cy="369.1838" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152.3194" x="197.5" y="373.1158">tenant_id: Optional[int]</text><ellipse cx="188.5" cy="388.2517" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.8135" x="197.5" y="392.1837">roles: Tuple[str, ...]</text><ellipse cx="188.5" cy="407.3196" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169.1894" x="197.5" y="411.2516">permissions: Tuple[str, ...]</text><line style="stroke:#181818;stroke-width:0.5;" x1="178.5" x2="371.6894" y1="419.3536" y2="419.3536"/></g><!--class SecurityModule--><g class="entity" data-entity="SecurityModule" data-source-line="21" data-uid="ent0006" id="entity_SecurityModule"><rect fill="#F1F1F1" height="80.4799" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="218.9193" x="439.5" y="130.6699"/><ellipse cx="493.4698" cy="153.3759" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M496.4386,159.0165 Q495.8605,159.3134 495.2198,159.454 Q494.5792,159.6103 493.8761,159.6103 Q491.3761,159.6103 490.048,157.9697 Q488.7355,156.3134 488.7355,153.1884 Q488.7355,150.0634 490.048,148.4072 Q491.3761,146.7509 493.8761,146.7509 Q494.5792,146.7509 495.2198,146.9072 Q495.8761,147.0634 496.4386,147.3603 L496.4386,150.079 Q495.8136,149.5009 495.2198,149.2353 Q494.6261,148.954 494.0011,148.954 Q492.6573,148.954 491.9698,150.0322 Q491.2823,151.0947 491.2823,153.1884 Q491.2823,155.2822 491.9698,156.3603 Q492.6573,157.4228 494.0011,157.4228 Q494.6261,157.4228 495.2198,157.1572 Q495.8136,156.8759 496.4386,156.2978 L496.4386,159.0165 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="51.6844" x="539.3674" y="148.498">&#171;module&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.4796" x="513.9698" y="166.9799">SecurityModule</text><line style="stroke:#181818;stroke-width:0.5;" x1="440.5" x2="657.4193" y1="176.0819" y2="176.0819"/><line style="stroke:#181818;stroke-width:0.5;" x1="440.5" x2="657.4193" y1="184.0819" y2="184.0819"/><ellipse cx="450.5" cy="199.1159" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192.9193" x="459.5" y="203.0479">get_current_user() : AuthUser</text></g><!--class ContextModule--><g class="entity" data-entity="ContextModule" data-source-line="25" data-uid="ent0007" id="entity_ContextModule"><rect fill="#F1F1F1" height="80.4799" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="357.5607" x="46" y="130.6699"/><ellipse cx="169.8716" cy="153.3759" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M172.8403,159.0165 Q172.2622,159.3134 171.6216,159.454 Q170.9809,159.6103 170.2778,159.6103 Q167.7778,159.6103 166.4497,157.9697 Q165.1372,156.3134 165.1372,153.1884 Q165.1372,150.0634 166.4497,148.4072 Q167.7778,146.7509 170.2778,146.7509 Q170.9809,146.7509 171.6216,146.9072 Q172.2778,147.0634 172.8403,147.3603 L172.8403,150.079 Q172.2153,149.5009 171.6216,149.2353 Q171.0278,148.954 170.4028,148.954 Q169.0591,148.954 168.3716,150.0322 Q167.6841,151.0947 167.6841,153.1884 Q167.6841,155.2822 168.3716,156.3603 Q169.0591,157.4228 170.4028,157.4228 Q171.0278,157.4228 171.6216,157.1572 Q172.2153,156.8759 172.8403,156.2978 L172.8403,159.0165 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="51.6844" x="215.1882" y="148.498">&#171;module&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.3176" x="190.3716" y="166.9799">ContextModule</text><line style="stroke:#181818;stroke-width:0.5;" x1="47" x2="402.5607" y1="176.0819" y2="176.0819"/><line style="stroke:#181818;stroke-width:0.5;" x1="47" x2="402.5607" y1="184.0819" y2="184.0819"/><ellipse cx="57" cy="199.1159" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="331.5607" x="66" y="203.0479">get_user_context(current: AuthUser) : UserContext</text></g><g class="entity" data-entity="GMN11" data-source-line="35" data-uid="ent0012" id="entity_GMN11"><path d="M715.5,336.1699 L715.5,354.6699 L646.67,358.6699 L715.5,362.6699 L715.5,381.5819 A0,0 0 0 0 715.5,381.5819 L990.5592,381.5819 A0,0 0 0 0 990.5592,381.5819 L990.5592,346.1699 L980.5592,336.1699 L715.5,336.1699 A0,0 0 0 0 715.5,336.1699" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M980.5592,336.1699 L980.5592,346.1699 L990.5592,346.1699 L980.5592,336.1699" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.5901" x="721.5" y="355.0669">Source: app/core/security.py</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="254.0592" x="721.5" y="372.7729">Represents decoded JWT/session identity.</text></g><g class="entity" data-entity="GMN14" data-source-line="40" data-uid="ent0015" id="entity_GMN14"><path d="M1026,336.1699 L1026,381.5819 L1425.8723,381.5819 L1425.8723,346.1699 L1415.8723,336.1699 L1026,336.1699" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1415.8723,336.1699 L1415.8723,346.1699 L1425.8723,346.1699 L1415.8723,336.1699" fill="#FEFFDD" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.4451" x="1032" y="355.0669">Source: app/core/context.py</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="378.8723" x="1032" y="372.7729">Framework-agnostic user/tenant context passed into services.</text></g><!--link SecurityModule to AuthUser--><g class="link" data-entity-1="SecurityModule" data-entity-2="AuthUser" data-source-line="30" data-uid="lnk8" id="link_SecurityModule_AuthUser"><path codeLine="30" d="M549,211.1199 C549,233.8299 549,257.0099 549,283.3399" fill="none" id="SecurityModule-to-AuthUser" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="549,289.3399,553,280.3399,549,284.3399,545,280.3399,549,289.3399" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.058" x="550" y="255.5669">returns</text></g><!--link ContextModule to AuthUser--><g class="link" data-entity-1="ContextModule" data-entity-2="AuthUser" data-source-line="31" data-uid="lnk9" id="link_ContextModule_AuthUser"><path codeLine="31" d="M290.45,210.7699 C316.39,226.1399 346.53,243.8699 374,259.6699 C398.9,273.9899 420.6962,286.3261 445.8862,300.4461" fill="none" id="ContextModule-to-AuthUser" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="451.12,303.3799,445.2251,295.49,446.7585,300.9351,441.3134,302.4685,451.12,303.3799" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.8022" x="375" y="255.5669">Depends(get_current_user)</text></g><!--link ContextModule to UserContext--><g class="link" data-entity-1="ContextModule" data-entity-2="UserContext" data-source-line="32" data-uid="lnk10" id="link_ContextModule_UserContext"><path codeLine="32" d="M228.37,211.0399 C230.21,226.3699 232.95,243.9899 237,259.6699 C239.53,269.4799 240.7552,273.9812 244.2452,283.8812" fill="none" id="ContextModule-to-UserContext" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="246.24,289.5399,247.0202,279.722,244.5776,284.8243,239.4753,282.3818,246.24,289.5399" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.058" x="238" y="255.5669">returns</text></g><!--link UserContext to GMN14--><g class="link" data-entity-1="UserContext" data-entity-2="GMN14" data-source-line="40" data-uid="lnk16" id="link_UserContext_GMN14"><path d="M366.21,289.5299 C392.39,273.4199 421.91,258.5399 451.5,250.1699 C566.76,217.5799 873.5,224.5099 990.5,250.1699 C1065.47,266.6099 1145.04,309.2799 1189.83,335.9499" fill="none" id="UserContext-GMN14" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7;"/></g><!--SRC=[nLDTIyCm57tFhxZCbmrjE_2jb85EV114S1CVXeoGtdLXNHBoeGxnltlJLTlDuQljGvEUctFE_OYNlaQu72UYviubJmxjL2kFxnuoS9vxAUXZW_318dCRgGotV0lNN6mgguCgfxhM5ivMu_WoPWZW5SA06vCARN407um1DFnm5VmwQa1HS5fE9WG2FUSWonoayktEe-BAB-FF1-EbLhnU4FhImbRNw7AO1rFZWknTG9gctw11kvNEqQ6J8P-TctwsHI7sgvwdGFZoFupDK0Gh_UvUbu7QKnJRPj6pLg5VKen5CXDj3aUG_rJtaApDy6-k9jMs0iEMk2ECvBrYDVoaS6GpIIPTWtEmI3EZ73lKFmgwGOEgTCFZV4OdZlNRrT4pfJs2bTNQWrvrDPZfO0NcG7EOnJdCNEisDJlsYCQY8p479GfTOWbtptCAQTf3mqXG36La3gB0iKo_6h-KsZf6eLkwBFYcxIRXbT8kNgUONhQV8sWZmL2Zo0DDaWQ2NwL0rnF_0W00]--></g></svg>