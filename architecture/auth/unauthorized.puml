
@startuml
title Unauthorized request to /projects

actor Web as Web
participant "ProjectController" as ProjectCtl
participant "UserContext provider" as UserCtx
participant "SecurityModule" as Sec

Web -> ProjectCtl : GET /projects\n(no or bad token)
activate ProjectCtl

ProjectCtl -> UserCtx : get_user_context()
UserCtx -> Sec : get_current_user(token)
Sec --> UserCtx : HTTPException(401)
UserCtx --> ProjectCtl : propagate error
deactivate ProjectCtl

ProjectCtl --> Web : 401 Unauthorized

legend right
  See also:
  - [[sign-in-no-auth.svg Sign-in (user not yet authenticated)]]
  - [[logged-in-get-projects.svg Authenticated request to /projects]]
  - [[sign-in-login.svg Signin API Login flow]]
  - [[register.svg Register User]]
end legend
@enduml
